/*!
 * broadcast-events.js v1.3.0
 * @description A simple way to fire JavaScript events across iframes.
 * @see {@link https://github.com/orca-scan/broadcast-event}
 * @author Orca Scan <orcascan.com>
 * @license MIT
 */
!function(e){"use strict";if("function"!=typeof e.CustomEvent)throw new Error("Missing CustomEvent polyfill");var t=e.location.href,n=i(t+":"+Date.now()+":"+1e18*Math.random()),r={};function a(a,s,u){a=String(a||"")||"",s=s||{},(u=u||{}).debug=!0===u.debug,s._originId||(s._originId=n),s._targetId=s._targetId||u.target;var c={type:a,detail:s,eventIds:u._eventIds||[],debug:u.debug};if(function(e){var n=Date.now(),a=n-3e4;if(Object.keys(r).forEach(function(e){r[e]<a&&delete r[e]}),e.eventIds.some(function(e){return void 0!==r[e]}))return!0;var o=i(t+":"+e.type+":"+performance.now()+":"+Math.random());return e.eventIds.push(o),r[o]=n,!1}(c))u.debug&&o('suppressed "'+c.type+'"');else{s._targetId&&s._targetId!==n||e.dispatchEvent(new CustomEvent(a,{detail:s})),e.parent!==e&&(d(e.parent,c),u.debug&&o('sending "'+c.type+'" up'));for(var g=0,f=e.frames.length;g<f;g++)d(e.frames[g],c),u.debug&&o('sending "'+c.type+'" down')}}function o(){var e=[].slice.call(arguments),n=["broadcast-event["+t+"]"].concat(e);console.log.apply(console,n)}function d(t,n){if(t!==e)try{t.postMessage({_broadcast:n},"*")}catch(e){}}function i(e){for(var t=2166136261,n=0;n<e.length;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return Math.abs(t>>>0).toString(36)}e.addEventListener("message",function(t){if(t.source!==e){var n=t.data&&t.data._broadcast;if(n&&"string"==typeof n.type&&n.detail&&n.detail._originId){n.debug&&o('received "'+n.type+'"');var r={_eventIds:n.eventIds,debug:n.debug,target:n.target};a(n.type,n.detail,r)}}}),"undefined"!=typeof module&&module.exports?module.exports=a:e.broadcastEvent=a}(this);